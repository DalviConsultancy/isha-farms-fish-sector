<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isha Farms - Fish Sector</title>
    <link rel="icon" href="https://www.flaticon.com/svg/v2/svg/1998/1998627.svg" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes cartItemAdd {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        html {
            scroll-behavior: smooth;
        }

        :root {
            --primary-color: #004d40; /* Deep Teal - inspired by peacock blue/green */
            --secondary-color: #ff6f00; /* Vibrant Orange/Saffron */
            --accent-color: #ffd600; /* Golden Yellow */
            --text-dark: #212121;
            --text-light: #ffffff;
            --bg-light: #e8f5e9; /* Very light green/cream */
            --bg-dark: #c8e6c9; /* Light green for cart items */
            --border-color: #a5d6a7; /* Medium green */
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-light);
            background-image: url('https://www.transparenttextures.com/patterns/rice-paper.png'); /* Subtle Indian paper texture */
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 30px auto;
            background-color: var(--text-light);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 40px var(--shadow-medium);
            overflow: hidden;
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
            font-family: 'Pacifico', cursive; /* Playful font for titles */
        }

        h1 {
            font-size: 3.5em;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            font-size: 2.5em;
            border-bottom: 3px solid var(--secondary-color);
            display: inline-block;
            padding-bottom: 8px;
            margin-top: 50px;
            font-family: 'Hind Siliguri', sans-serif;
        }

        .products-section {
            text-align: center;
        }

        .product-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Adjusted min width */
            gap: 30px; /* Slightly reduced gap */
            margin-top: 40px;
        }

        .product-item {
            background-color: var(--text-light);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px; /* Reduced padding */
            text-align: center;
            box-shadow: 0 8px 20px var(--shadow-light);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            opacity: 0; /* Initially hidden for animation */
            animation: fadeInUp 0.5s ease-out forwards;
        }

        .product-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 12px 12px 0 0;
        }

        .product-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 18px 35px var(--shadow-medium);
        }

        .product-item img {
            max-width: 100%;
            height: 180px; /* Reduced image height */
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px; /* Reduced margin */
            border: 2px solid var(--secondary-color);
        }

        .product-item h3 {
            font-size: 1.8em; /* Slightly reduced font size */
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 8px; /* Reduced margin */
            font-weight: 600;
        }

        .product-item .description {
            font-size: 0.9em; /* Slightly reduced font size */
            color: var(--text-dark);
            margin-bottom: 10px; /* Reduced margin */
            flex-grow: 1;
        }

        .product-item .available-quantity {
            font-size: 0.85em;
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 600;
            text-align: center;
        }

        .product-item .price {
            font-size: 1.4em; /* Slightly reduced font size */
            color: var(--secondary-color);
            font-weight: 700;
            margin-bottom: 10px; /* Reduced margin */
        }

        .product-item .quantity-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px; /* Reduced margin */
        }

        .product-item .quantity-selector input {
            width: 50px; /* Reduced width */
            padding: 6px; /* Reduced padding */
            border: 1px solid var(--border-color);
            border-radius: 5px;
            text-align: center;
            font-size: 0.9em; /* Reduced font size */
            margin: 0 8px; /* Reduced margin */
        }

        .product-item .quantity-selector button {
            background-color: var(--primary-color);
            color: var(--text-light);
            border: none;
            padding: 6px 10px; /* Reduced padding */
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em; /* Slightly reduced font size */
            transition: background-color 0.3s ease;
        }

        .product-item .quantity-selector button:hover {
            background-color: #00332e; /* Darken primary */
        }

        .pricing-options {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .pricing-option-button {
            background-color: var(--text-light);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .pricing-option-button.selected {
            background-color: var(--primary-color);
            color: var(--text-light);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .pricing-option-button:hover:not(.selected) {
            background-color: var(--bg-light);
        }

        .product-item button.add-to-cart {
            background-color: var(--accent-color);
            color: var(--text-dark);
            border: none;
            padding: 12px 25px; /* Reduced padding */
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em; /* Slightly reduced font size */
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            margin-top: auto;
        }

        .product-item button.add-to-cart.added-feedback {
            background-color: #4CAF50; /* Green for success */
            color: white;
        }

        .product-item button.add-to-cart:hover {
            background-color: #e6c200; /* Darken accent */
            transform: translateY(-3px);
        }

        .cart-section {
            margin-top: 70px;
            border-top: 2px solid var(--border-color);
            padding-top: 50px;
            text-align: center;
        }

        #cart-items {
            list-style: none;
            padding: 0;
            margin-top: 30px;
        }

        #cart-items li {
            background-color: var(--bg-dark);
            margin-bottom: 15px;
            padding: 18px 25px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2em;
            box-shadow: 0 4px 12px var(--shadow-light);
            border-left: 5px solid var(--secondary-color);
            animation: cartItemAdd 0.4s ease-out;
        }

        #cart-items li button {
            background-color: #dc3545; /* Red for remove button */
            color: var(--text-light);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }

        #cart-items li button:hover {
            background-color: #c82333; /* Darken red */
        }

        #cart-total {
            font-size: 2em;
            font-weight: 700;
            text-align: right;
            margin-top: 30px;
            color: var(--primary-color);
            padding-right: 25px;
        }

        .checkout-form {
            margin-top: 40px;
            text-align: left;
            padding: 30px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            background-color: var(--bg-light);
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two columns */
            gap: 20px; /* Spacing between grid items */
        }

        .checkout-form h2 {
            grid-column: 1 / -1; /* Span across both columns */
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 2em;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .checkout-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
            margin-top: 15px;
        }

        .checkout-form label:first-child {
            border-top: none;
            padding-top: 0;
            margin-top: 0;
        }

        .checkout-form input[type="text"],
        .checkout-form input[type="email"],
        .checkout-form textarea,
        .checkout-form select {
            width: 100%; /* Full width within its grid column */
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            box-sizing: border-box; /* Include padding in width */
            background-color: var(--text-light);
            color: var(--text-dark);
        }

        .checkout-form textarea {
            resize: vertical;
            min-height: 100px;
            grid-column: 1 / -1; /* Address field spans full width */
        }

        .checkout-form .full-width {
            grid-column: 1 / -1; /* For elements that should span full width */
        }

        .checkout-button {
            background-color: var(--primary-color);
            color: var(--text-light);
            border: none;
            padding: 18px 40px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.5em;
            font-weight: 700;
            margin-top: 30px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        .checkout-button:hover {
            background-color: #00332e; /* Darken primary */
            transform: translateY(-5px);
        }

        /* Fund Progress Bar Styles */
        .fund-section h2 {
            font-family: 'Hind Siliguri', sans-serif;
        }

        .fund-progress-bar {
            width: 100%;
            background-color: var(--bg-dark);
            border-radius: 50px;
            height: 35px;
            margin: 30px 0;
            overflow: hidden;
            display: flex;
            position: relative;
            border: 2px solid var(--primary-color);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .fund-initial, .fund-profit {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 0.8s ease-in-out;
            white-space: nowrap;
            padding: 0 15px;
            font-size: 0.9em;
        }

        .fund-initial {
            background: linear-gradient(45deg, #4CAF50, #81C784);
        }

        .fund-profit {
            background: linear-gradient(45deg, #FFC107, #FFD54F);
            color: var(--text-dark);
        }

        .fund-goal-label {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1em;
        }

        .fund-summary {
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary-color);
            margin-top: -15px;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.6); /* Black w/ opacity */
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--text-light);
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px var(--shadow-medium);
            width: 80%;
            max-width: 500px;
            text-align: center;
            position: relative;
            animation: fadeIn 0.3s ease-out;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--primary-color);
            text-decoration: none;
            cursor: pointer;
        }

        #modal-title {
            color: var(--primary-color);
            font-size: 2.2em;
            margin-bottom: 15px;
        }

        #modal-message {
            font-size: 1.1em;
            color: var(--text-dark);
            margin-bottom: 25px;
            white-space: pre-wrap; /* Preserve newlines */
            text-align: left;
        }

        #modal-buttons button {
            background-color: var(--primary-color);
            color: var(--text-light);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }

        #modal-buttons button:hover {
            background-color: #00332e;
        }

        #modal-cancel-button {
            background-color: #dc3545;
        }

        #modal-cancel-button:hover {
            background-color: #c82333;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        button, .pricing-option-button {
            transition: transform 0.1s ease, background-color 0.3s ease, color 0.3s ease;
        }

        button:active, .pricing-option-button:active {
            transform: scale(0.97);
        }

        .hidden {
            display: none !important;
        }

        .multi-input {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .multi-input input {
            width: 35px;
            height: 40px;
            text-align: center;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1.2em;
            padding: 5px;
        }

        .phone-prefix {
            width: 40px !important;
            background-color: var(--bg-dark);
            border: none;
            font-weight: bold;
            color: var(--text-dark);
        }
    </style>
</head>
<body>
    <audio id="background-music" loop>
        <!-- Replace 'YOUR_AUDIO_FILE_URL_HERE.mp3' with an actual Indian-themed audio file URL -->
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="container">
        <h1>Isha Farms - Fish Sector</h1>
        <p style="text-align: center; font-size: 1.2em; color: #555;">Welcome to Isha Farms, your trusted source for premium aquatic life and supplies. We are dedicated to providing healthy, vibrant fish and high-quality products to enhance your aquarium experience.</p>

        <section class="products-section">
            <h2>Our Essential Collection</h2>
            <div class="product-list" id="product-list">
                <div class="product-item">
                    <img src="https://fishlab.com/wp-content/uploads/2022/09/Poecilia-Wingei.jpg" alt="Indian Guppy">
                    <h3>Vibrant Indian Guppies</h3>
                    <p class="description">Hardy and colorful Guppies, bred with care in India. Ideal for all aquarists.</p>
                    <p class="available-quantity">Available: 45 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="pair">Pair</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="guppy-price-display">₹ 60.00</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input" id="guppy-quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Vibrant Indian Guppies" data-product-type="guppy">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://th.bing.com/th/id/OIP.H-PDwwFUufXfpp00MGbPsgHaHa?w=213&h=213&c=7&r=0&o=7&pid=1.7&rm=3" alt="Premium Fish Flakes">
                    <h3>Premium Fish Flakes (45g)</h3>
                    <p class="description">45g of nutrient-rich flakes for all tropical fish, promoting vibrant colors and healthy growth. Made with natural ingredients.</p>
                    <p class="available-quantity">Available: 80 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="flakes-price-display">₹ 270.00 (per unit)</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Premium Fish Flakes (45g)" data-price="270.00" data-product-type="standard">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://th.bing.com/th/id/OIP.DbukpAfkQ5WuG8GyIA0SRQHaF7?w=227&h=182&c=7&r=0&o=7&pid=1.7&rm=3" alt="Assorted Aquarium Snails">
                    <h3>Assorted Aquarium Snails</h3>
                    <p class="description">Beneficial clean-up crew for your aquarium. Helps control algae and detritus.</p>
                    <p class="available-quantity">Available: 60 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="pair">Pair</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="snail-price-display">₹ 20.00 (per snail)</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Assorted Aquarium Snails" data-price="20.00" data-product-type="snail">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://th.bing.com/th/id/OIP.F3iZI-VB2joD8FBfEDkAtQHaD1?w=323&h=179&c=7&r=0&o=7&pid=1.7&rm=3" alt="Indian Water Lily">
                    <h3>Indian Water Lily</h3>
                    <p class="description">Beautiful aquatic plant with broad leaves and vibrant flowers, ideal for adding natural beauty to your aquarium.</p>
                    <p class="available-quantity">Available: 25 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="waterlily-price-display">₹ 20.00</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Indian Water Lily" data-price="20.00" data-product-type="standard">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://th.bing.com/th/id/OIP.F3iZI-VB2joD8FBfEDkAtQHaD1?w=323&h=179&c=7&r=0&o=7&pid=1.7&rm=3" alt="Java Fern">
                    <h3>Java Fern</h3>
                    <p class="description">Easy-to-care-for aquatic fern, perfect for beginners. Attaches to driftwood or rocks, providing shelter for fish.</p>
                    <p class="available-quantity">Available: 35 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="pair">Pair</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="javafern-price-display">₹ 20.00</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Java Fern" data-price="20.00" data-product-type="standard">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://th.bing.com/th/id/OIP.F3iZI-VB2joD8FBfEDkAtQHaD1?w=323&h=179&c=7&r=0&o=7&pid=1.7&rm=3" alt="Plant 3">
                    <h3>Plant 3</h3>
                    <p class="description">Easy-to-care-for aquatic fern, perfect for beginners. Attaches to driftwood or rocks, providing shelter for fish.</p>
                    <p class="available-quantity">Available: 20 units</p>
                    <div class="pricing-options">
                        <button type="button" class="pricing-option-button" data-value="single">Single</button>
                        <button type="button" class="pricing-option-button" data-value="bulk">Bulk</button>
                    </div>
                    <p class="price" id="plant3-price-display">₹ 40.00</p>
                    <div class="quantity-selector">
                        <button class="decrease-quantity">-</button>
                        <input type="number" value="1" min="1" class="quantity-input">
                        <button class="increase-quantity">+</button>
                    </div>
                    <button class="add-to-cart" data-name="Plant 3" data-price="40.00" data-product-type="standard">Add to Cart</button>
                </div>
                <div class="product-item">
                    <img src="https://via.placeholder.com/180x180?text=Guppy+Ebook" alt="Guppy Care Ebook">
                    <h3>Guppy Care Ebook</h3>
                    <p class="description">Comprehensive guide to guppy care, breeding, and tank maintenance. Perfect for beginners and experienced aquarists.</p>
                    <p class="available-quantity">Available: Unlimited</p>
                    <p class="price">₹ 100.00</p>
                    <p style="font-size: 0.8em; color: green; margin-top: -10px;">Free with orders above ₹300</p>
                    <button class="add-to-cart" data-name="Guppy Care Ebook" data-price="100.00" data-product-type="ebook">Add to Cart</button>
                </div>
        </section>

        <section class="cart-section">
            <h2>Your Shopping Basket</h2>
            <ul id="cart-items">
                <!-- Cart items will be added here by JavaScript -->
            </ul>
            <div id="cart-total">Total: ₹ 0.00</div>

            <div class="checkout-form">
                <h2>Delivery Details</h2>
                <label for="customer-name">Full Name:</label>
                <input type="text" id="customer-name" placeholder="Your Full Name" required>

                <label for="customer-email">Email:</label>
                <input type="email" id="customer-email" placeholder="your.email@example.com" required>

                <label for="customer-phone">Phone Number:</label>
                <div class="multi-input" id="phone-input-container">
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="phone-digit" required>
                </div>

                <label for="customer-address">Delivery Address:</label>
                <textarea id="customer-address" placeholder="House No., Street, Locality" required></textarea>

                <label for="customer-pincode">Pincode:</label>
                <div class="multi-input" id="pincode-input-container">
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                    <input type="text" maxlength="1" pattern="[0-9]" class="pincode-digit" required>
                </div>

                <label for="special-notes" class="full-width">Special Notes (Optional):</label>
                <textarea id="special-notes" placeholder="e.g., specific delivery instructions, gift message"></textarea>
            </div>

            <button class="checkout-button" id="checkout-button">Proceed to Checkout</button>
        </section>

        <section class="fund-section">
            <h2>Our Investment Fund: Empowering Growth</h2>
            <p>We believe in wealth, therefore we invest. Our commitment to growth extends beyond our products; 20% of all profits are reinvested into a dedicated fund. This fund supports sustainable aquaculture practices and community development initiatives, ensuring a brighter future for both our business and the environment.</p>
            <p style="text-align: center; font-size: 0.9em; color: #555;">
                <span style="color: #4CAF50; font-weight: bold;">Green:</span> Income from shop sales | 
                <span style="color: #FFC107; font-weight: bold;">Yellow:</span> Profit from investments
            </p>
            <div class="fund-progress-bar">
                <div class="fund-initial" style="width: 20%;">₹200</div>
                <div class="fund-profit" style="width: 3%;">₹30</div>
                <span class="fund-goal-label">Goal: ₹1,000</span>
            </div>
            <p class="fund-summary"><strong>Current Fund:</strong> ₹<span id="current-fund-value">230</span></p>
        </section>
    </div>

    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-message"></p>
            <div id="modal-buttons">
                <button id="modal-confirm-button" class="modal-button">Confirm</button>
                <button id="modal-cancel-button" class="modal-button">Cancel</button>
                <button id="modal-ok-button" class="modal-button">OK</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded - Script is running.');

            // Staggered animation for product list
            document.querySelectorAll('.product-item').forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });

            const productList = document.getElementById('product-list');
            const cartItemsList = document.getElementById('cart-items');
            const cartTotalDisplay = document.getElementById('cart-total');
            const checkoutButton = document.getElementById('checkout-button');
            let cart = [];

            // Modal elements
            const customModal = document.getElementById('custom-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalConfirmButton = document.getElementById('modal-confirm-button');
            const modalCancelButton = document.getElementById('modal-cancel-button');
            const modalOkButton = document.getElementById('modal-ok-button');
            const closeButton = document.querySelector('.close-button');

            // Ensure modal is hidden on load
            if (customModal) {
                customModal.classList.add('hidden');
                console.log('Modal found and hidden.');
            } else {
                console.error('Modal element #custom-modal not found!');
            }

            // Pricing Data
            const PRICING_DATA = {
                "Vibrant Indian Guppies": {
                    single: 60,
                    pair: 40,
                    bulk: 25
                },
                "Premium Fish Flakes (45g)": {
                    single: 270,
                    bulk: 240
                },
                "Assorted Aquarium Snails": {
                    single: 20,
                    pair: 15,
                    bulk: 10
                },
                "Indian Water Lily": {
                    single: 20,
                    bulk: 10
                },
                "Java Fern": {
                    single: 20,
                    pair: 15,
                    bulk: 10
                },
                "Plant 3": {
                    single: 40,
                    bulk: 30
                },
                "Guppy Care Ebook": {
                    single: 100
                }
            };

            // Function to show custom alert
            function showAlert(title, message) {
                console.log('showAlert called.');
                if (!customModal) {
                    console.error('showAlert: customModal is null. Cannot display alert.');
                    return;
                }
                modalTitle.textContent = title;
                modalMessage.textContent = message;
                modalConfirmButton.style.display = 'none';
                modalCancelButton.style.display = 'none';
                modalOkButton.style.display = 'inline-block';
                customModal.classList.remove('hidden');
                customModal.style.display = 'flex';
                console.log('Alert displayed.');
            }

            // Function to show custom confirm
            function showConfirm(title, message, onConfirm, onCancel) {
                console.log('showConfirm called.');
                if (!customModal) {
                    console.error('showConfirm: customModal is null. Cannot display confirm.');
                    return;
                }
                modalTitle.textContent = title;
                modalMessage.textContent = message;
                modalConfirmButton.style.display = 'inline-block';
                modalCancelButton.style.display = 'inline-block';
                modalOkButton.style.display = 'none';
                customModal.classList.remove('hidden');
                customModal.style.display = 'flex';
                console.log('Confirm displayed.');

                modalConfirmButton.onclick = () => {
                    console.log('Confirm button clicked.');
                    customModal.classList.add('hidden');
                    onConfirm();
                };
                modalCancelButton.onclick = () => {
                    console.log('Cancel button clicked.');
                    customModal.classList.add('hidden');
                    onCancel();
                };
                closeButton.onclick = () => {
                    console.log('Close button clicked.');
                    customModal.classList.add('hidden');
                    onCancel();
                };
            }

            if(customModal) {
                // Close modal on OK button click
                modalOkButton.onclick = () => {
                    console.log('OK button clicked.');
                    customModal.classList.add('hidden');
                };

                // Close modal on close button click (for alerts)
                closeButton.onclick = () => {
                    console.log('Close button clicked.');
                    customModal.classList.add('hidden');
                };
            }


            // Function to get product price based on name, quantity, and type
            function getProductCalculatedPrice(productName, quantity, pricingType) {
                const productPricing = PRICING_DATA[productName];
                if (productPricing && productPricing[pricingType]) {
                    return productPricing[pricingType];
                }
                return 0;
            }

            // Helper function to update a product's displayed price and UI elements
            function updateProductUI(productItem) {
                const productName = productItem.querySelector('h3').textContent.trim();
                const quantityInput = productItem.querySelector('.quantity-input');
                const priceDisplay = productItem.querySelector('.price');
                const pricingOptionsDiv = productItem.querySelector('.pricing-options');
                const decreaseButton = productItem.querySelector('.decrease-quantity');

                let selectedPricingType = 'single';
                if (pricingOptionsDiv) {
                    const selectedButton = pricingOptionsDiv.querySelector('.pricing-option-button.selected');
                    if (selectedButton) {
                        selectedPricingType = selectedButton.dataset.value;
                    }
                }

                let quantity = quantityInput ? parseInt(quantityInput.value) : 1;

                // Set min attribute for quantity input
                if(quantityInput) {
                    if (selectedPricingType === 'bulk') {
                        quantityInput.min = 15;
                    } else if (selectedPricingType === 'pair') {
                        quantityInput.min = 2;
                    } else {
                        quantityInput.min = 1;
                    }
                }
                

                // Disable decrease button if quantity is at minimum
                if(decreaseButton && quantityInput) {
                    decreaseButton.disabled = (quantity <= parseInt(quantityInput.min));
                }

                const calculatedPrice = getProductCalculatedPrice(productName, 1, selectedPricingType);
                if (priceDisplay) {
                    priceDisplay.textContent = `₹ ${calculatedPrice.toFixed(2)}`;
                }
            }

            // Function to render pricing option buttons for a product
            function renderPricingOptions(productItem) {
                const productName = productItem.querySelector('h3').textContent.trim();
                const pricingOptionsDiv = productItem.querySelector('.pricing-options');
                const quantitySelectorDiv = productItem.querySelector('.quantity-selector');
                const quantityInput = productItem.querySelector('.quantity-input');

                const productPricing = PRICING_DATA[productName];

                if (pricingOptionsDiv) {
                    pricingOptionsDiv.innerHTML = ''; // Clear existing buttons

                    let firstOptionValue = null;

                    if (productPricing) {
                        if (productPricing.single !== undefined) {
                            const singleButton = document.createElement('button');
                            singleButton.type = 'button';
                            singleButton.classList.add('pricing-option-button');
                            singleButton.dataset.value = 'single';
                            singleButton.textContent = 'Single';
                            pricingOptionsDiv.appendChild(singleButton);
                            if (!firstOptionValue) firstOptionValue = 'single';
                        }
                        if (productPricing.pair !== undefined) {
                            const pairButton = document.createElement('button');
                            pairButton.type = 'button';
                            pairButton.classList.add('pricing-option-button');
                            pairButton.dataset.value = 'pair';
                            pairButton.textContent = 'Pair';
                            pricingOptionsDiv.appendChild(pairButton);
                            if (!firstOptionValue) firstOptionValue = 'pair';
                        }
                        if (productPricing.bulk !== undefined) {
                            const bulkButton = document.createElement('button');
                            bulkButton.type = 'button';
                            bulkButton.classList.add('pricing-option-button');
                            bulkButton.dataset.value = 'bulk';
                            bulkButton.textContent = 'Bulk';
                            pricingOptionsDiv.appendChild(bulkButton);
                            if (!firstOptionValue) firstOptionValue = 'bulk';
                        }
                    }

                    // Set the selected class for the first available option by default
                    if (firstOptionValue) {
                        const defaultSelectedButton = pricingOptionsDiv.querySelector(`[data-value="${firstOptionValue}"]`);
                        if (defaultSelectedButton) {
                            defaultSelectedButton.classList.add('selected');
                        }
                    }
                }

                // Show/hide quantity selector based on available pricing options
                if (quantitySelectorDiv) {
                    if (productPricing && (productPricing.pair !== undefined || productPricing.bulk !== undefined)) {
                        quantitySelectorDiv.style.display = 'flex';
                    } else {
                        quantitySelectorDiv.style.display = 'none';
                        if (quantityInput) {
                            quantityInput.value = 1; // Reset quantity to 1 if no options
                        }
                    }
                }
            }

            // Initialize UI for all products on load
            document.querySelectorAll('.product-item').forEach(item => {
                renderPricingOptions(item); // Render buttons first
                updateProductUI(item); // Then update UI based on initial selection
            });

            function updateCartDisplay() {
                cartItemsList.innerHTML = '';
                let total = 0;
                cart.forEach((item, index) => {
                    const listItem = document.createElement('li');
                    const itemTotalPrice = getProductCalculatedPrice(item.name, 1, item.pricingType) * item.quantity;

                    listItem.innerHTML = `
                        <span>${item.name} (x${item.quantity}) ${item.pricingType !== 'single' ? `(${item.pricingType})` : ''} - ₹ ${itemTotalPrice.toFixed(2)}</span>
                        <button data-index="${index}" class="remove-from-cart">Remove</button>
                    `;
                    cartItemsList.appendChild(listItem);
                    total += itemTotalPrice;
                });
                cartTotalDisplay.textContent = `Total: ₹ ${total.toFixed(2)}`;
            }

            productList.addEventListener('click', (event) => {
                const target = event.target;
                const productItem = target.closest('.product-item');

                if (!productItem) {
                    return; // Click was not on a product item
                }

                const productName = productItem.querySelector('h3').textContent.trim();
                const quantityInput = productItem.querySelector('.quantity-input');
                let quantity = quantityInput ? parseInt(quantityInput.value) : 1;

                if (target.classList.contains('increase-quantity')) {
                    quantityInput.value = ++quantity;
                    updateProductUI(productItem);
                } else if (target.classList.contains('decrease-quantity')) {
                    const selectedPricingType = productItem.querySelector('.pricing-option-button.selected').dataset.value;
                    const minQuantity = (selectedPricingType === 'bulk') ? 15 : (selectedPricingType === 'pair' ? 2 : 1);
                    if (quantity > minQuantity) {
                        quantityInput.value = --quantity;
                        updateProductUI(productItem);
                    }
                } else if (target.classList.contains('pricing-option-button')) {
                    const pricingOptionsDiv = target.closest('.pricing-options');
                    pricingOptionsDiv.querySelectorAll('.pricing-option-button').forEach(button => {
                        button.classList.remove('selected');
                    });
                    target.classList.add('selected');

                    if (target.dataset.value === 'bulk') {
                        if(quantity < 15) quantityInput.value = 15;
                    } else if (target.dataset.value === 'pair') {
                        if (quantity < 2) {
                            quantityInput.value = 2;
                        }
                    } else { // single
                        if (quantity < 1) {
                            quantityInput.value = 1;
                        }
                    }

                    updateProductUI(productItem); // Update price based on new selection
                } else if (target.classList.contains('add-to-cart')) {
                    if (target.classList.contains('added-feedback')) {
                        return; // Prevent adding multiple times while feedback is shown
                    }
                    const productType = target.dataset.productType;
                    let selectedPricingType = 'single';

                    const pricingButtons = productItem.querySelectorAll('.pricing-option-button');
                    const selectedButton = Array.from(pricingButtons).find(button => button.classList.contains('selected'));
                    if (selectedButton) {
                        selectedPricingType = selectedButton.dataset.value;
                    }

                    // Bulk quantity validation
                    if (selectedPricingType === 'bulk' && quantity < 15) {
                        showAlert('Quantity Error', 'For bulk purchases, the quantity must be 15 or more.');
                        return;
                    }
                    // Pair quantity validation
                    if (selectedPricingType === 'pair' && quantity < 2) {
                        showAlert('Quantity Error', 'For pair purchases, the quantity must be 2 or more.');
                        return;
                    }

                    const existingItemIndex = cart.findIndex(item => item.name === productName && item.pricingType === selectedPricingType);

                    if (existingItemIndex > -1) {
                        cart[existingItemIndex].quantity += quantity;
                    } else {
                        cart.push({ name: productName, quantity: quantity, productType: productType, pricingType: selectedPricingType });
                    }
                    updateCartDisplay();

                    // Visual feedback for the button
                    target.classList.add('added-feedback');
                    target.textContent = 'Added!';
                    setTimeout(() => {
                        target.classList.remove('added-feedback');
                        target.textContent = 'Add to Cart';
                    }, 1500);

                    if (productType !== 'ebook') {
                        if(quantityInput) quantityInput.value = 1; // Reset quantity after adding to cart
                        // Reset pricing option selection to 'single' or 'pair' and apply 'selected' class
                        const defaultPricingButton = productItem.querySelector('.pricing-option-button[data-value="single"]') || productItem.querySelector('.pricing-option-button[data-value="pair"]');
                        if (defaultPricingButton) {
                            pricingButtons.forEach(button => button.classList.remove('selected'));
                            defaultPricingButton.classList.add('selected');
                        }
                        updateProductUI(productItem); // Update UI after resetting quantity/selection
                    }
                }
            });

            cartItemsList.addEventListener('click', (event) => {
                if (event.target.classList.contains('remove-from-cart')) {
                    const indexToRemove = parseInt(event.target.dataset.index);
                    cart.splice(indexToRemove, 1);
                    updateCartDisplay();
                }
            });

            checkoutButton.addEventListener('click', () => {
                const customerName = document.getElementById('customer-name').value;
                const customerEmail = document.getElementById('customer-email').value;
                const customerAddress = document.getElementById('customer-address').value;
                
                const phoneInputs = document.querySelectorAll('#phone-input-container .phone-digit');
                let customerPhone = '';
                phoneInputs.forEach(input => customerPhone += input.value);

                const pincodeInputs = document.querySelectorAll('#pincode-input-container .pincode-digit');
                let customerPincode = '';
                pincodeInputs.forEach(input => customerPincode += input.value);


                if (cart.length === 0) {
                    showAlert('Cart Empty', 'Your shopping basket is empty. Please add some items before checking out.');
                    return;
                }

                if (!customerName || !customerEmail || !customerAddress || customerPhone.length !== 10 || customerPincode.length !== 6) {
                    showAlert('Missing Details', 'Please fill in all delivery details, including a 10-digit phone number and a 6-digit pincode.');
                    return;
                }

                // Handle Ebook pricing based on subtotalBeforeEbook
                let ebookInCart = cart.find(item => item.name === 'Guppy Care Ebook');
                let ebookDiscountApplied = false;

                // Calculate subtotal excluding ebook first
                let subtotalBeforeEbook = cart.reduce((sum, item) => {
                    if (item.name !== 'Guppy Care Ebook') {
                        const itemPrice = PRICING_DATA[item.name][item.pricingType];
                        return sum + (itemPrice * item.quantity);
                    }
                    return sum;
                }, 0);

                // Ebook logic
                if (subtotalBeforeEbook >= 300) {
                    if (!ebookInCart) {
                        // Automatically add Ebook as free if subtotal is >= 300
                        cart.push({ name: 'Guppy Care Ebook', quantity: 1, productType: 'ebook', pricingType: 'single', isFree: true });
                    } else {
                        // Ensure Ebook is marked as free if already in cart and subtotal >= 300
                        ebookInCart.isFree = true;
                    }
                    ebookDiscountApplied = true;
                } else {
                    if (ebookInCart && ebookInCart.isFree) {
                        // If subtotal drops below 300 and ebook was free, remove it
                        cart = cart.filter(item => item.name !== 'Guppy Care Ebook');
                    } else if (ebookInCart) {
                        // If ebook was explicitly added and subtotal is < 300, ensure it's charged
                        ebookInCart.isFree = false;
                    }
                }

                // Recalculate subtotal including charged ebook if applicable
                let subtotal = cart.reduce((sum, item) => {
                    if (item.name === 'Guppy Care Ebook' && item.isFree) {
                        return sum; // Ebook is free, don't add to subtotal
                    }
                    const itemPrice = PRICING_DATA[item.name][item.pricingType];
                    return sum + (itemPrice * item.quantity);
                }, 0);

                // Apply 5% discount for Indian customers
                const isIndianCustomer = true; // Assuming customer is from India as per request
                let discountAmount = subtotal * 0.05;
                const finalTotal = subtotal - discountAmount;

                let orderSummary = 'Your Order Summary:\n';
                orderSummary += '-------------------------------------\n'; // Top divider

                cart.forEach(item => {
                    if (item.name === 'Guppy Care Ebook' && item.isFree) {
                        // Ebook is free, handled as a discount line later
                    } else {
                        const itemPrice = PRICING_DATA[item.name][item.pricingType];
                        const itemTotalPrice = itemPrice * item.quantity;
                        orderSummary += `${item.name} (x${item.quantity}) ${item.pricingType !== 'single' ? `(${item.pricingType})` : ''} - ₹ ${itemTotalPrice.toFixed(2)}\n`;
                    }
                });

                orderSummary += '-------------------------------------\n'; // Divider before totals
                orderSummary += `Subtotal: ₹ ${subtotal.toFixed(2)}\n`;
                orderSummary += `Indian Customer Discount (5%): -₹ ${discountAmount.toFixed(2)}\n`;

                if (ebookDiscountApplied) {
                    orderSummary += `Ebook Discount: FREE (Order over ₹300)\n`;
                } else if (ebookInCart && !ebookInCart.isFree) {
                    orderSummary += `Guppy Care Ebook: ₹ ${PRICING_DATA['Guppy Care Ebook'].single.toFixed(2)}\n`;
                }
                
                orderSummary += '-------------------------------------\n'; // Divider before final total
                orderSummary += `Total: ₹ ${finalTotal.toFixed(2)}\n\n`;
                orderSummary += `Delivery Details:
Name: ${customerName}
Email: ${customerEmail}
Phone: ${customerPhone}
Address: ${customerAddress} - ${customerPincode}
`;
                const specialNotes = document.getElementById('special-notes').value;
                if (specialNotes) {
                    orderSummary += `Special Notes: ${specialNotes}
`;
                }
                orderSummary += `
`;

                showConfirm(
                    'Confirm Your Order',
                    orderSummary,
                    () => { // onConfirm callback
                        showAlert('Order Placed!', 'धन्यवाद! Your order has been placed. We will contact you shortly.');
                        const whatsappUrl = `https://wa.me/919049364656?text=${encodeURIComponent(orderSummary)}`;
                        window.open(whatsappUrl, '_blank');
                        cart = []; // Clear cart after checkout
                        updateCartDisplay();
                        // Clear form fields
                        document.getElementById('customer-name').value = '';
                        document.getElementById('customer-email').value = '';
                        document.getElementById('customer-address').value = '';
                        document.querySelectorAll('#phone-input-container .phone-digit').forEach(input => input.value = '');
                        document.querySelectorAll('#pincode-input-container .pincode-digit').forEach(input => input.value = '');
                        document.getElementById('special-notes').value = '';
                    },
                    () => { // onCancel callback
                        showAlert('Order Cancelled', 'Order cancelled. You can modify your cart or delivery details.');
                    }
                );
            });

            updateCartDisplay(); // Initialize cart display on load

            // Auto-tab for multi-input fields
            function setupMultiInput(containerId) {
                const container = document.getElementById(containerId);
                if (container) {
                    const inputs = Array.from(container.querySelectorAll('input[type="text"]'));
                    inputs.forEach((input, index) => {
                        input.addEventListener('input', (e) => {
                            // Enforce numbers only
                            e.target.value = e.target.value.replace(/[^0-9]/g, '');

                            // Auto-tab to next input
                            if (input.value.length === input.maxLength && index + 1 < inputs.length) {
                                inputs[index + 1].focus();
                            }
                        });

                        input.addEventListener('keydown', (e) => {
                            // Move to previous input on backspace
                            if (e.key === 'Backspace' && input.value.length === 0 && index > 0) {
                                inputs[index - 1].focus();
                            }
                        });
                    });
                }
            }

            setupMultiInput('phone-input-container');
            setupMultiInput('pincode-input-container');
        });
    </script>
</body>
</html>